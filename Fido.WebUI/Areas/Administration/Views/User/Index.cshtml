@* http://www.codeproject.com/Articles/155422/jQuery-DataTables-and-ASP-NET-MVC-Integration-Part *@
@model Fido.ViewModel.Models.Administration.UserIndex

@using Fido.WebUI.Controllers

@{
    ViewBag.Title = "Users";
}

@Html.ActionLink("Create New User", "Create", "User")<br/><br/>

<table id="IndexTable" width="100%" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0">
    <thead>
        <tr>
            <th>Firstname</th>
            <th>Surname</th>
            <th>Email Address</th>
            <th>Local</th>
            <th>External</th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
<span class="skd-spacing-large"></span>

@section scripts
{
<script type="text/javascript">
    var EditLink = '@(Html.ActionLink("Edit", "Update", "User", new { Id = -999 }, null))';
    var DeleteLink = '@(Html.ActionLink("Delete", "Delete", "User", new { Id = -999 }, new { @class = "modal-link" }))';
    var AjaxPath = '@(Url.Action("List", "User"))';

    $(document).ready(function () {
        $('#IndexTable').dataTable({
            "bServerSide": true,
            "sAjaxSource": AjaxPath,
            "bProcessing": true,
            "aoColumns": [
                            { "sName": "Firstname" },
                            { "sName": "Surname" },
                            { "sName": "Email Address" },
                            { "sName": "Local Credentials" },
                            { "sName": "External Credentials" },
                            {
                                "sName": "Edit",
                                "bSearchable": false,
                                "bSortable": false,
                                "mRender": function (value) {
                                    return EditLink.replace("-999", value);
                                }
                            },
                            {
                                "sName": "Delete",
                                "bSearchable": false,
                                "bSortable": false,
                                "mRender": function (value) {
                                    return DeleteLink.replace("-999", value);
                                }
                            }
            ]
        });
    });
</script>
}
